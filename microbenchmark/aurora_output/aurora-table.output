+ '[' -z '' ']'
+ case "$-" in
+ __lmod_vx=x
+ '[' -n x ']'
+ set +x
Shell debugging temporarily silenced: export LMOD_SH_DBG_ON=1 for this output (/usr/share/lmod/lmod/init/bash)
Shell debugging restarted
+ unset __lmod_vx
+ export VENDOR=INTEL
+ VENDOR=INTEL
+ ./run.sh
+ tee log.txt
+ '[' -z '' ']'
+ case "$-" in
+ __lmod_vx=x
+ '[' -n x ']'
+ set +x
Shell debugging temporarily silenced: export LMOD_SH_DBG_ON=1 for this output (/usr/share/lmod/lmod/init/bash)
Shell debugging restarted
+ unset __lmod_vx
+ mpicxx -fiopenmp -fopenmp-targets=spir64 flops.cpp -o flops
+ mpirun -n 1 -- ./gpu_tile_compact.sh ./flops
Single Precision Peak Flops: 22687.2 GFlop/s
Double Precision Peak Flops: 17188.5 GFlop/s
+ mpirun -n 2 -- ./gpu_tile_compact.sh ./flops
Single Precision Peak Flops: 45133 GFlop/s
Double Precision Peak Flops: 33865.3 GFlop/s
+ mpirun -n 12 -- ./gpu_tile_compact.sh ./flops
Single Precision Peak Flops: 267860 GFlop/s
Double Precision Peak Flops: 198956 GFlop/s
+ mpicxx -fiopenmp -fopenmp-targets=spir64 triad.cpp -o triad
+ mpirun -n 1 -- ./gpu_tile_compact.sh ./triad
Memory Bandwidth (triad): 1027.59 GB/s
+ mpirun -n 2 -- ./gpu_tile_compact.sh ./triad
Memory Bandwidth (triad): 2023.38 GB/s
+ mpirun -n 12 -- ./gpu_tile_compact.sh ./triad
Memory Bandwidth (triad): 11891 GB/s
+ mpicxx -fsycl pci.cpp -o pci
+ mpirun -n 1 --cpu-bind list:1,2,3,4,5,6,52,53,54,55,56,57 -- ./gpu_tile_compact.sh ./pci
PCIe Unidirectional Bandwidth (H2D): 54 GB/s
PCIe Unidirectional Bandwidth (D2H): 55 GB/s
PCIe Bidirectional Bandwidth: 76 GB/s
+ mpirun -n 2 --cpu-bind list:1,2,3,4,5,6,52,53,54,55,56,57 -- ./gpu_tile_compact.sh ./pci
PCIe Unidirectional Bandwidth (H2D): 108 GB/s
PCIe Unidirectional Bandwidth (D2H): 108 GB/s
PCIe Bidirectional Bandwidth: 152 GB/s
+ mpirun -n 12 --cpu-bind list:1,2,3,4,5,6,52,53,54,55,56,57 -- ./gpu_tile_compact.sh ./pci
PCIe Unidirectional Bandwidth (H2D): 329 GB/s
PCIe Unidirectional Bandwidth (D2H): 281 GB/s
PCIe Bidirectional Bandwidth: 369 GB/s
+ export MPIR_CVAR_CH4_IPC_GPU_ENGINE_TYPE=copy_high_bandwidth
+ MPIR_CVAR_CH4_IPC_GPU_ENGINE_TYPE=copy_high_bandwidth
+ mpicxx -fsycl peer2pear.cpp -o peer2pear
+ mpirun -n 2 -- ./gpu_tile_compact.sh ./peer2pear Tile2Tile
Tile2Tile Unidirectional Bandwidth: 3 GB/s
Tile2Tile Bidirectional Bandwidth: 3 GB/s
+ mpirun -n 12 -- ./gpu_tile_compact.sh ./peer2pear Tile2Tile
Tile2Tile Unidirectional Bandwidth: 4 GB/s
Tile2Tile Bidirectional Bandwidth: 6 GB/s
+ icpx -lze_loader topology.cpp -o topology
+ mpirun -n 2 -- ./gpu_tile_plan_compact.sh ./peer2pear GPU2GPU
GPU2GPU Unidirectional Bandwidth: 3 GB/s
GPU2GPU Bidirectional Bandwidth: 3 GB/s
+ mpirun -n 12 -- ./gpu_tile_plan_compact.sh ./peer2pear GPU2GPU
GPU2GPU Unidirectional Bandwidth: 7 GB/s
GPU2GPU Bidirectional Bandwidth: 10 GB/s
+ mpicxx -fsycl gemm.cpp -qmkl -o gemm
+ mpirun -n 1 -- ./gpu_tile_compact.sh ./gemm
Memory FootPrint: 3456000000 bytes
DGEMM: 14953.5 GFlop/s
Memory FootPrint: 2466250752 bytes
SGEMM: 22863.9 GFlop/s
Memory FootPrint: 2774532096 bytes
HGEMM: 205826 GFlop/s
Memory FootPrint: 3699376128 bytes
BF16GEMM: 213652 GFlop/s
Memory FootPrint: 2466250752 bytes
TF32GEMM: 108760 GFlop/s
Memory FootPrint: 4586471424 bytes
I8GEMM: 435799 GFlop/s
+ mpirun -n 2 -- ./gpu_tile_compact.sh ./gemm
Memory FootPrint: 3456000000 bytes
DGEMM: 29894.5 GFlop/s
Memory FootPrint: 2466250752 bytes
SGEMM: 45727 GFlop/s
Memory FootPrint: 2774532096 bytes
HGEMM: 411635 GFlop/s
Memory FootPrint: 3699376128 bytes
BF16GEMM: 428614 GFlop/s
Memory FootPrint: 2466250752 bytes
TF32GEMM: 216534 GFlop/s
Memory FootPrint: 4586471424 bytes
I8GEMM: 867246 GFlop/s
+ mpirun -n 12 -- ./gpu_tile_compact.sh ./gemm
Memory FootPrint: 3456000000 bytes
DGEMM: 175870 GFlop/s
Memory FootPrint: 2466250752 bytes
SGEMM: 271749 GFlop/s
Memory FootPrint: 2774532096 bytes
HGEMM: 2.38546e+06 GFlop/s
Memory FootPrint: 3699376128 bytes
BF16GEMM: 2.42662e+06 GFlop/s
Memory FootPrint: 2466250752 bytes
TF32GEMM: 1.25129e+06 GFlop/s
Memory FootPrint: 4586471424 bytes
I8GEMM: 4.99275e+06 GFlop/s
+ mpicxx -fsycl fftc2c.cpp -qmkl -o fftc2c
+ mpirun -n 1 -- ./gpu_tile_compact.sh ./fftc2c
Single-precision FFT C2C 1D: 3198.65 GFlop/s
Single-precision FFT C2C 2D: 3373.57 GFlop/s
+ mpirun -n 2 -- ./gpu_tile_compact.sh ./fftc2c
Single-precision FFT C2C 1D: 5986.46 GFlop/s
Single-precision FFT C2C 2D: 6686.74 GFlop/s
+ mpirun -n 12 -- ./gpu_tile_compact.sh ./fftc2c
Single-precision FFT C2C 1D: 33730.7 GFlop/s
Single-precision FFT C2C 2D: 34555 GFlop/s
+ ./gen_mk_table.py log.txt micro
+ column -t -s '|' -o '|' -R 0
|                                     |   One Tile |   Full Node | Scaling |
|                                  ---|-----------:| -----------:|    ----:|
|         Single Precision Peak Flops | 23 TFlop/s | 268 TFlop/s |    11.8 |
|         Double Precision Peak Flops | 17 TFlop/s | 199 TFlop/s |    11.6 |
|            Memory Bandwidth (triad) |     1 TB/s |     12 TB/s |    11.6 |
| PCIe Unidirectional Bandwidth (H2D) |    54 GB/s |    329 GB/s |     6.1 |
| PCIe Unidirectional Bandwidth (D2H) |    55 GB/s |    281 GB/s |     5.1 |
|        PCIe Bidirectional Bandwidth |    76 GB/s |    369 GB/s |     4.9 |
|  Tile2Tile Unidirectional Bandwidth |     3 GB/s |      4 GB/s |     1.3 |
|   Tile2Tile Bidirectional Bandwidth |     3 GB/s |      6 GB/s |     2.0 |
|    GPU2GPU Unidirectional Bandwidth |     3 GB/s |      7 GB/s |     2.3 |
|     GPU2GPU Bidirectional Bandwidth |     3 GB/s |     10 GB/s |     3.3 |
+ ./gen_mk_table.py log.txt GEMM
+ column -t -s '|' -o '|' -R 0
|          |    One Tile |    Full Node | Scaling |
|       ---| -----------:|  -----------:|    ----:|
|    DGEMM |  15 TFlop/s |  176 TFlop/s |    11.8 |
|    SGEMM |  23 TFlop/s |  272 TFlop/s |    11.9 |
|    HGEMM | 206 TFlop/s | 2385 TFlop/s |    11.6 |
| BF16GEMM | 214 TFlop/s | 2427 TFlop/s |    11.4 |
| TF32GEMM | 109 TFlop/s | 1251 TFlop/s |    11.5 |
|   I8GEMM | 436 TFlop/s | 4993 TFlop/s |    11.5 |
+ ./gen_mk_table.py log.txt FFT
+ column -t -s '|' -o '|' -R 0
|                             |   One Tile |  Full Node | Scaling |
|                          ---|-----------:|-----------:|    ----:|
| Single-precision FFT C2C 1D |  3 TFlop/s | 34 TFlop/s |    10.5 |
| Single-precision FFT C2C 2D |  3 TFlop/s | 35 TFlop/s |    10.2 |
