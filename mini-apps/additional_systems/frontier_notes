# lstopo
```
Machine (502GB total) + Package L#0
  Group0 L#0
    NUMANode L#0 (P#0 125GB)
    L3 L#0 (32MB)
      L2 L#0 (512KB) + L1d L#0 (32KB) + L1i L#0 (32KB) + Core L#0
        PU L#0 (P#1)
        PU L#1 (P#65)
      L2 L#1 (512KB) + L1d L#1 (32KB) + L1i L#1 (32KB) + Core L#1
        PU L#2 (P#2)
        PU L#3 (P#66)
      L2 L#2 (512KB) + L1d L#2 (32KB) + L1i L#2 (32KB) + Core L#2
        PU L#4 (P#3)
        PU L#5 (P#67)
      L2 L#3 (512KB) + L1d L#3 (32KB) + L1i L#3 (32KB) + Core L#3
        PU L#6 (P#4)
        PU L#7 (P#68)
      L2 L#4 (512KB) + L1d L#4 (32KB) + L1i L#4 (32KB) + Core L#4
        PU L#8 (P#5)
        PU L#9 (P#69)
      L2 L#5 (512KB) + L1d L#5 (32KB) + L1i L#5 (32KB) + Core L#5
        PU L#10 (P#6)
        PU L#11 (P#70)
      L2 L#6 (512KB) + L1d L#6 (32KB) + L1i L#6 (32KB) + Core L#6
        PU L#12 (P#7)
        PU L#13 (P#71)
      HostBridge
        PCIBridge
          PCI d1:00.0 (Display)
            GPU(RSMI) "rsmi4"
    L3 L#1 (32MB)
      L2 L#7 (512KB) + L1d L#7 (32KB) + L1i L#7 (32KB) + Core L#7
        PU L#14 (P#9)
        PU L#15 (P#73)
      L2 L#8 (512KB) + L1d L#8 (32KB) + L1i L#8 (32KB) + Core L#8
        PU L#16 (P#10)
        PU L#17 (P#74)
      L2 L#9 (512KB) + L1d L#9 (32KB) + L1i L#9 (32KB) + Core L#9
        PU L#18 (P#11)
        PU L#19 (P#75)
      L2 L#10 (512KB) + L1d L#10 (32KB) + L1i L#10 (32KB) + Core L#10
        PU L#20 (P#12)
        PU L#21 (P#76)
      L2 L#11 (512KB) + L1d L#11 (32KB) + L1i L#11 (32KB) + Core L#11
        PU L#22 (P#13)
        PU L#23 (P#77)
      L2 L#12 (512KB) + L1d L#12 (32KB) + L1i L#12 (32KB) + Core L#12
        PU L#24 (P#14)
        PU L#25 (P#78)
      L2 L#13 (512KB) + L1d L#13 (32KB) + L1i L#13 (32KB) + Core L#13
        PU L#26 (P#15)
        PU L#27 (P#79)
      HostBridge
        PCIBridge
          PCI d5:00.0 (Ethernet)
            Net "hsn2"
        PCIBridge
          PCI d6:00.0 (Display)
            GPU(RSMI) "rsmi5"
    HostBridge
      PCIBridge
        PCIBridge
          PCIBridge
            PCI 94:00.0 (Ethernet)
              Net "ens2"
          PCIBridge
            PCI 95:00.0 (NVMExp)
              Block(Disk) "nvme0n1"
          PCIBridge
            PCI 99:00.0 (NVMExp)
              Block(Disk) "nvme1n1"
  Group0 L#1
    NUMANode L#1 (P#1 126GB)
    L3 L#2 (32MB)
      L2 L#14 (512KB) + L1d L#14 (32KB) + L1i L#14 (32KB) + Core L#14
        PU L#28 (P#17)
        PU L#29 (P#81)
      L2 L#15 (512KB) + L1d L#15 (32KB) + L1i L#15 (32KB) + Core L#15
        PU L#30 (P#18)
        PU L#31 (P#82)
      L2 L#16 (512KB) + L1d L#16 (32KB) + L1i L#16 (32KB) + Core L#16
        PU L#32 (P#19)
        PU L#33 (P#83)
      L2 L#17 (512KB) + L1d L#17 (32KB) + L1i L#17 (32KB) + Core L#17
        PU L#34 (P#20)
        PU L#35 (P#84)
      L2 L#18 (512KB) + L1d L#18 (32KB) + L1i L#18 (32KB) + Core L#18
        PU L#36 (P#21)
        PU L#37 (P#85)
      L2 L#19 (512KB) + L1d L#19 (32KB) + L1i L#19 (32KB) + Core L#19
        PU L#38 (P#22)
        PU L#39 (P#86)
      L2 L#20 (512KB) + L1d L#20 (32KB) + L1i L#20 (32KB) + Core L#20
        PU L#40 (P#23)
        PU L#41 (P#87)
      HostBridge
        PCIBridge
          PCI c9:00.0 (Display)
            GPU(RSMI) "rsmi2"
    L3 L#3 (32MB)
      L2 L#21 (512KB) + L1d L#21 (32KB) + L1i L#21 (32KB) + Core L#21
        PU L#42 (P#25)
        PU L#43 (P#89)
      L2 L#22 (512KB) + L1d L#22 (32KB) + L1i L#22 (32KB) + Core L#22
        PU L#44 (P#26)
        PU L#45 (P#90)
      L2 L#23 (512KB) + L1d L#23 (32KB) + L1i L#23 (32KB) + Core L#23
        PU L#46 (P#27)
        PU L#47 (P#91)
      L2 L#24 (512KB) + L1d L#24 (32KB) + L1i L#24 (32KB) + Core L#24
        PU L#48 (P#28)
        PU L#49 (P#92)
      L2 L#25 (512KB) + L1d L#25 (32KB) + L1i L#25 (32KB) + Core L#25
        PU L#50 (P#29)
        PU L#51 (P#93)
      L2 L#26 (512KB) + L1d L#26 (32KB) + L1i L#26 (32KB) + Core L#26
        PU L#52 (P#30)
        PU L#53 (P#94)
      L2 L#27 (512KB) + L1d L#27 (32KB) + L1i L#27 (32KB) + Core L#27
        PU L#54 (P#31)
        PU L#55 (P#95)
      HostBridge
        PCIBridge
          PCI cd:00.0 (Ethernet)
            Net "hsn1"
        PCIBridge
          PCI ce:00.0 (Display)
            GPU(RSMI) "rsmi3"
  Group0 L#2
    NUMANode L#2 (P#2 126GB)
    L3 L#4 (32MB)
      L2 L#28 (512KB) + L1d L#28 (32KB) + L1i L#28 (32KB) + Core L#28
        PU L#56 (P#33)
        PU L#57 (P#97)
      L2 L#29 (512KB) + L1d L#29 (32KB) + L1i L#29 (32KB) + Core L#29
        PU L#58 (P#34)
        PU L#59 (P#98)
      L2 L#30 (512KB) + L1d L#30 (32KB) + L1i L#30 (32KB) + Core L#30
        PU L#60 (P#35)
        PU L#61 (P#99)
      L2 L#31 (512KB) + L1d L#31 (32KB) + L1i L#31 (32KB) + Core L#31
        PU L#62 (P#36)
        PU L#63 (P#100)
      L2 L#32 (512KB) + L1d L#32 (32KB) + L1i L#32 (32KB) + Core L#32
        PU L#64 (P#37)
        PU L#65 (P#101)
      L2 L#33 (512KB) + L1d L#33 (32KB) + L1i L#33 (32KB) + Core L#33
        PU L#66 (P#38)
        PU L#67 (P#102)
      L2 L#34 (512KB) + L1d L#34 (32KB) + L1i L#34 (32KB) + Core L#34
        PU L#68 (P#39)
        PU L#69 (P#103)
      HostBridge
        PCIBridge
          PCI d9:00.0 (Display)
            GPU(RSMI) "rsmi6"
    L3 L#5 (32MB)
      L2 L#35 (512KB) + L1d L#35 (32KB) + L1i L#35 (32KB) + Core L#35
        PU L#70 (P#41)
        PU L#71 (P#105)
      L2 L#36 (512KB) + L1d L#36 (32KB) + L1i L#36 (32KB) + Core L#36
        PU L#72 (P#42)
        PU L#73 (P#106)
      L2 L#37 (512KB) + L1d L#37 (32KB) + L1i L#37 (32KB) + Core L#37
        PU L#74 (P#43)
        PU L#75 (P#107)
      L2 L#38 (512KB) + L1d L#38 (32KB) + L1i L#38 (32KB) + Core L#38
        PU L#76 (P#44)
        PU L#77 (P#108)
      L2 L#39 (512KB) + L1d L#39 (32KB) + L1i L#39 (32KB) + Core L#39
        PU L#78 (P#45)
        PU L#79 (P#109)
      L2 L#40 (512KB) + L1d L#40 (32KB) + L1i L#40 (32KB) + Core L#40
        PU L#80 (P#46)
        PU L#81 (P#110)
      L2 L#41 (512KB) + L1d L#41 (32KB) + L1i L#41 (32KB) + Core L#41
        PU L#82 (P#47)
        PU L#83 (P#111)
      HostBridge
        PCIBridge
          PCI dd:00.0 (Ethernet)
            Net "hsn3"
        PCIBridge
          PCI de:00.0 (Display)
            GPU(RSMI) "rsmi7"
  Group0 L#3
    NUMANode L#3 (P#3 125GB)
    L3 L#6 (32MB)
      L2 L#42 (512KB) + L1d L#42 (32KB) + L1i L#42 (32KB) + Core L#42
        PU L#84 (P#49)
        PU L#85 (P#113)
      L2 L#43 (512KB) + L1d L#43 (32KB) + L1i L#43 (32KB) + Core L#43
        PU L#86 (P#50)
        PU L#87 (P#114)
      L2 L#44 (512KB) + L1d L#44 (32KB) + L1i L#44 (32KB) + Core L#44
        PU L#88 (P#51)
        PU L#89 (P#115)
      L2 L#45 (512KB) + L1d L#45 (32KB) + L1i L#45 (32KB) + Core L#45
        PU L#90 (P#52)
        PU L#91 (P#116)
      L2 L#46 (512KB) + L1d L#46 (32KB) + L1i L#46 (32KB) + Core L#46
        PU L#92 (P#53)
        PU L#93 (P#117)
      L2 L#47 (512KB) + L1d L#47 (32KB) + L1i L#47 (32KB) + Core L#47
        PU L#94 (P#54)
        PU L#95 (P#118)
      L2 L#48 (512KB) + L1d L#48 (32KB) + L1i L#48 (32KB) + Core L#48
        PU L#96 (P#55)
        PU L#97 (P#119)
      HostBridge
        PCIBridge
          PCI c1:00.0 (Display)
            GPU(RSMI) "rsmi0"
    L3 L#7 (32MB)
      L2 L#49 (512KB) + L1d L#49 (32KB) + L1i L#49 (32KB) + Core L#49
        PU L#98 (P#57)
        PU L#99 (P#121)
      L2 L#50 (512KB) + L1d L#50 (32KB) + L1i L#50 (32KB) + Core L#50
        PU L#100 (P#58)
        PU L#101 (P#122)
      L2 L#51 (512KB) + L1d L#51 (32KB) + L1i L#51 (32KB) + Core L#51
        PU L#102 (P#59)
        PU L#103 (P#123)
      L2 L#52 (512KB) + L1d L#52 (32KB) + L1i L#52 (32KB) + Core L#52
        PU L#104 (P#60)
        PU L#105 (P#124)
      L2 L#53 (512KB) + L1d L#53 (32KB) + L1i L#53 (32KB) + Core L#53
        PU L#106 (P#61)
        PU L#107 (P#125)
      L2 L#54 (512KB) + L1d L#54 (32KB) + L1i L#54 (32KB) + Core L#54
        PU L#108 (P#62)
        PU L#109 (P#126)
      L2 L#55 (512KB) + L1d L#55 (32KB) + L1i L#55 (32KB) + Core L#55
        PU L#110 (P#63)
        PU L#111 (P#127)
      HostBridge
        PCIBridge
          PCI c5:00.0 (Ethernet)
            Net "hsn0"
        PCIBridge
          PCI c6:00.0 (Display)
            GPU(RSMI) "rsmi1"
```

# srun -n 1  rocm-smi --showtopo
```

========================= ROCm System Management Interface =========================
============================= Weight between two GPUs ==============================
       GPU0         GPU1         GPU2         GPU3         GPU4         GPU5         GPU6         GPU7         
GPU0   0            15           15           30           30           30           15           30           
GPU1   15           0            30           15           30           15           30           45           
GPU2   15           30           0            15           15           30           30           30           
GPU3   30           15           15           0            30           45           30           15           
GPU4   30           30           15           30           0            15           15           30           
GPU5   30           15           30           45           15           0            30           15           
GPU6   15           30           30           30           15           30           0            15           
GPU7   30           45           30           15           30           15           15           0            

============================== Hops between two GPUs ===============================
       GPU0         GPU1         GPU2         GPU3         GPU4         GPU5         GPU6         GPU7         
GPU0   0            1            1            1            1            1            1            1            
GPU1   1            0            1            1            1            1            1            1            
GPU2   1            1            0            1            1            1            1            1            
GPU3   1            1            1            0            1            1            1            1            
GPU4   1            1            1            1            0            1            1            1            
GPU5   1            1            1            1            1            0            1            1            
GPU6   1            1            1            1            1            1            0            1            
GPU7   1            1            1            1            1            1            1            0            

============================ Link Type between two GPUs ============================
       GPU0         GPU1         GPU2         GPU3         GPU4         GPU5         GPU6         GPU7         
GPU0   0            XGMI         XGMI         XGMI         XGMI         XGMI         XGMI         XGMI         
GPU1   XGMI         0            XGMI         XGMI         XGMI         XGMI         XGMI         XGMI         
GPU2   XGMI         XGMI         0            XGMI         XGMI         XGMI         XGMI         XGMI         
GPU3   XGMI         XGMI         XGMI         0            XGMI         XGMI         XGMI         XGMI         
GPU4   XGMI         XGMI         XGMI         XGMI         0            XGMI         XGMI         XGMI         
GPU5   XGMI         XGMI         XGMI         XGMI         XGMI         0            XGMI         XGMI         
GPU6   XGMI         XGMI         XGMI         XGMI         XGMI         XGMI         0            XGMI         
GPU7   XGMI         XGMI         XGMI         XGMI         XGMI         XGMI         XGMI         0            

==================================== Numa Nodes ====================================
GPU[0]		: (Topology) Numa Node: 3
GPU[0]		: (Topology) Numa Affinity: 3
GPU[1]		: (Topology) Numa Node: 3
GPU[1]		: (Topology) Numa Affinity: 3
GPU[2]		: (Topology) Numa Node: 1
GPU[2]		: (Topology) Numa Affinity: 1
GPU[3]		: (Topology) Numa Node: 1
GPU[3]		: (Topology) Numa Affinity: 1
GPU[4]		: (Topology) Numa Node: 0
GPU[4]		: (Topology) Numa Affinity: 0
GPU[5]		: (Topology) Numa Node: 0
GPU[5]		: (Topology) Numa Affinity: 0
GPU[6]		: (Topology) Numa Node: 2
GPU[6]		: (Topology) Numa Affinity: 2
GPU[7]		: (Topology) Numa Node: 2
GPU[7]		: (Topology) Numa Affinity: 2
=============================== End of ROCm SMI Log ================================
```